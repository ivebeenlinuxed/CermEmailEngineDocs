---
title: "Debugging a Flow"
keywords: debugging
tags: [debug, error, flow, troubleshoot]
permalink: debugging.html
summary: So your flow isn't working? Let's find out why!
---

## Scenario

We shall be using the "First Flow" tutorial as the starting point for the debugging scenario.

## What is debugging

Software, or flows, can have "bugs". This is where the system doesn't do as you wanted it to. The important thing is to find out why! We have a range of different methods for doing this, including putting in a temporary stop, so we can see what is happening at any point, or checking the logs, to see what happened in the past.

## What happens if there is an error?

If you create an error in your flow, the Cerm Flows tool handles it and provides a log message and on-screen errors for you to check. Normally a node will have an "error" connector output, which will direct your job in a different direction. How you handle the error is all about what you connect to the error output - you can make it do anything!

Errors will not stop your flow, or affect other flows. The Cerm Flows system will handle the error properly, so if there are other jobs in your flow without an error, they will proceed as normal.

## Error Messages

Cerm Flows attempts to make it easy to debug a flow, by showing you the error messages directly next to the node which is responsible. The following screenshow shows an error which has occured in the "Simple Email" node. On reviewing the properties, the reason for this error was that the "Dry Run Output Directory" didn't exist!

{% include image.html file="debugging_onscreenerror.png" alt="The email could not send" caption="This is a typical error message related to a module" %}

## Error Log

All errors are stored in the CERM database, so you are able to write reports, or check on them as far back as you like. An onscreen error, described above, is always stored in the SQL server log for you to check.

## Using breakpoints

Once you have worked out an error, it is sometimes useful to put a temporary stop in the flow, so you can release jobs one by one, and see what happens. When the flow reaches a breakpoint it allows you to inspect the data associated with the job, then release it when you are happy. This means you can slow down things and logically approach and solve the problem.

### Adding a breakpoint

To create a breakpoint:
1. Add a "Breakpoint" node from the Flow Infrastructure module
2. Insert the breakpoint between two nodes
3. Run the flow

{% include image.html file="debugging_breakpointflow.png" alt="Flow with a breakpoint" caption="To stop a flow temporarily and release jobs manually, insert a breakpoint" %}

### Checking a breakpoint

Once you publish and restart your flow, select the breakpoint and inspect its properties.

- The "Max Queue" property ensures that you don't hold so many jobs your system runs out of memory to start any more! Very useful if you are running many hundreds of jobs a second!
- The "Wait List" shows you the jobs which are currently flowing through the system. Each job has a unique ID generated by the system and two buttons
  - "Release" will allow this job to continue the flow, and the next block will be triggered. In the example, this will send an email
  - "Inspect" will allow you to see the data associated with the job

{% include image.html file="debugging_breakpointproperties.png" alt="Breakpoint Properties" caption="An example of a breakpoint with a job in it" %}

{% include note.html content="Your breakpoint will clear all the data when your flow stops, so it is best if you debug while running." %}

### Inspecting Data

To inspect data click the "Inspect" button

{% include image.html file="debugging_inspection.png" alt="Breakpoint Properties" caption="An example of a breakpoint with a job in it" %}

1. On the left hand side, you can see a list of datasets which have currently been collected by the flow
2. Click on a dataset on the left to view its contents on the right
3. Use this box to check "magic tags". Insert your magic tag, and click "Execute" to make sure the right data will pull through
4. This box shows you the output of your magic tag

{% include note.html content="The most common reason for a flow to fail is that the magic tag is looking for a bit of data which is wrong or it can't find. Paste your magic tags into the textbox to double check your result is what you expect!" %}
